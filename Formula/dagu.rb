# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Dagu < Formula
  desc "A compact, portable, and language-agnostic workflow engine"
  homepage "https://github.com/dagu-org/dagu"
  version "1.22.1"
  license "GNU General Public License v3.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/dagu-org/dagu/releases/download/v1.22.1/dagu_1.22.1_darwin_amd64.tar.gz"
      sha256 "997618385408636126093d13b2e17ba62dc000199ecb6bfbba850d50e57a9995"

      def install
        bin.install "dagu"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/dagu-org/dagu/releases/download/v1.22.1/dagu_1.22.1_darwin_arm64.tar.gz"
      sha256 "e7ebf05d1d51d5a3b0a9317417b0a4b62cb148a78ba5ab78a98a072a961753df"

      def install
        bin.install "dagu"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? and Hardware::CPU.is_64_bit?
      url "https://github.com/dagu-org/dagu/releases/download/v1.22.1/dagu_1.22.1_linux_amd64.tar.gz"
      sha256 "0cea0225f8b470753532d4886d982bbd84ec4cdd810c3f6dfca8593d5bb58cf4"
      def install
        bin.install "dagu"
      end
    end
    if Hardware::CPU.arm? and !Hardware::CPU.is_64_bit?
      url "https://github.com/dagu-org/dagu/releases/download/v1.22.1/dagu_1.22.1_linux_armv6.tar.gz"
      sha256 "623ba8665c9d8221b117f7b3b105a355e075b297b674249df0a359cedac1f3d1"
      def install
        bin.install "dagu"
      end
    end
    if Hardware::CPU.arm? and Hardware::CPU.is_64_bit?
      url "https://github.com/dagu-org/dagu/releases/download/v1.22.1/dagu_1.22.1_linux_arm64.tar.gz"
      sha256 "8c663ee9c30fc7b939540fefe954d5d12bff09993c55f72e19fd45c926fa9437"
      def install
        bin.install "dagu"
      end
    end
  end

  service do
    run [opt_bin/"dagu", "start-all"]
    keep_alive true
    error_log_path var/"log/dagu.log"
    log_path var/"log/dagu.log"
    working_dir var
  end
end
